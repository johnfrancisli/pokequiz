import { Question } from '../types/game';

export const questions: Question[] = [
  {
    id: 1,
    text: "意味",
    options: ["いみ", "きめる", "ゆうめい", "みじかい"],
    correctAnswer: 0
  },
  {
    id: 2,
    text: "役に立つ",
    options: ["やくにたつ", "かつ", "きめる", "つかう"],
    correctAnswer: 0
  },
  {
    id: 3,
    text: "使う",
    options: ["つかう", "ひろう", "かつ", "おきる"],
    correctAnswer: 0
  },
  {
    id: 4,
    text: "短い",
    options: ["みじかい", "ひとしい", "にがて", "はじめる"],
    correctAnswer: 0
  },
  {
    id: 5,
    text: "自由のめがね",
    options: ["じゆうのめがね", "たいへいよう", "ひらがな", "ふくそう"],
    correctAnswer: 0
  },
  {
    id: 6,
    text: "体温",
    options: ["たいおん", "たいへいよう", "ちばけん", "つかう"],
    correctAnswer: 0
  },
  {
    id: 7,
    text: "今度",
    options: ["こんど", "きょねん", "ぜんぶ", "はじめる"],
    correctAnswer: 0
  },
  {
    id: 8,
    text: "全部",
    options: ["ぜんぶ", "ぜんいん", "りょうほう", "たいへいよう"],
    correctAnswer: 0
  },
  {
    id: 9,
    text: "全員",
    options: ["ぜんいん", "ぜんぶ", "りょうほう", "ちばけん"],
    correctAnswer: 0
  },
  {
    id: 10,
    text: "平がな",
    options: ["ひらがな", "たいへいよう", "はじめる", "ならう"],
    correctAnswer: 0
  },
  {
    id: 11,
    text: "重いかばん",
    options: ["おもいかばん", "はしをわたる", "ひろう", "かつ"],
    correctAnswer: 0
  },
  {
    id: 12,
    text: "等しい",
    options: ["ひとしい", "にがて", "きめる", "そだてる"],
    correctAnswer: 0
  },
  {
    id: 13,
    text: "とても寒い",
    options: ["とてもさむい", "みじかい", "ひとしい", "おきる"],
    correctAnswer: 0
  },
  {
    id: 14,
    text: "決める",
    options: ["きめる", "はじめる", "やくにたつ", "つかう"],
    correctAnswer: 0
  },
  {
    id: 15,
    text: "道路",
    options: ["どうろ", "さかみち", "はしをわたる", "ふで"],
    correctAnswer: 0
  },
  {
    id: 16,
    text: "屋根",
    options: ["やね", "そうこ", "こくばん", "かかり"],
    correctAnswer: 0
  },
  {
    id: 17,
    text: "住んでいる",
    options: ["すんでいる", "ならう", "そだてる", "にがて"],
    correctAnswer: 0
  },
  {
    id: 18,
    text: "拾う",
    options: ["ひろう", "ひとしい", "ひらがな", "ふくそう"],
    correctAnswer: 0
  },
  {
    id: 19,
    text: "橋をわたる",
    options: ["はしをわたる", "さかみち", "どうろ", "おきる"],
    correctAnswer: 0
  },
  {
    id: 20,
    text: "坂道",
    options: ["さかみち", "どうろ", "はしをわたる", "いみ"],
    correctAnswer: 0
  },
  {
    id: 21,
    text: "写真",
    options: ["しゃしん", "こくばん", "えだまめ", "たいへいよう"],
    correctAnswer: 0
  },
  {
    id: 22,
    text: "習う",
    options: ["ならう", "そだてる", "かかり", "きょねん"],
    correctAnswer: 0
  },
  {
    id: 23,
    text: "千葉県",
    options: ["ちばけん", "きょねん", "たいへいよう", "きめる"],
    correctAnswer: 0
  },
  {
    id: 24,
    text: "去年",
    options: ["きょねん", "ちばけん", "ぜんぶ", "ぜんいん"],
    correctAnswer: 0
  },
  {
    id: 25,
    text: "有名",
    options: ["ゆうめい", "いみ", "ちばけん", "さかみち"],
    correctAnswer: 0
  },
  {
    id: 26,
    text: "笛をふく",
    options: ["ふえをふく", "ふで", "ふくそう", "ひろう"],
    correctAnswer: 0
  },
  {
    id: 27,
    text: "黒板",
    options: ["こくばん", "そうこ", "しょくぶつ", "ふくそう"],
    correctAnswer: 0
  },
  {
    id: 28,
    text: "始める",
    options: ["はじめる", "きめる", "すんでいる", "おきる"],
    correctAnswer: 0
  },
  {
    id: 29,
    text: "勝つ",
    options: ["かつ", "かかり", "つかう", "ひろう"],
    correctAnswer: 0
  },
  {
    id: 30,
    text: "苦手",
    options: ["にがて", "ひとしい", "おもいかばん", "つかう"],
    correctAnswer: 0
  },
  {
    id: 31,
    text: "係",
    options: ["かかり", "かつ", "きょねん", "つかう"],
    correctAnswer: 0
  },
  {
    id: 32,
    text: "育てる",
    options: ["そだてる", "すんでいる", "きめる", "はじめる"],
    correctAnswer: 0
  },
  {
    id: 33,
    text: "学級",
    options: ["がっきゅう", "しょくぶつ", "そうこ", "かつ"],
    correctAnswer: 0
  },
  {
    id: 34,
    text: "倉庫",
    options: ["そうこ", "こくばん", "しょくぶつ", "そだてる"],
    correctAnswer: 0
  },
  {
    id: 35,
    text: "起きる",
    options: ["おきる", "おれいする", "かつ", "はじめる"],
    correctAnswer: 0
  },
  {
    id: 36,
    text: "お礼する",
    options: ["おれいする", "おきる", "えだまめ", "かかり"],
    correctAnswer: 0
  },
  {
    id: 37,
    text: "筆",
    options: ["ふで", "ふえをふく", "ふくそう", "しょくぶつ"],
    correctAnswer: 0
  },
  {
    id: 38,
    text: "植物",
    options: ["しょくぶつ", "しなもの", "にもつ", "きょねん"],
    correctAnswer: 0
  },
  {
    id: 39,
    text: "荷物",
    options: ["にもつ", "しなもの", "しょくぶつ", "そうこ"],
    correctAnswer: 0
  },
  {
    id: 40,
    text: "品物",
    options: ["しなもの", "にもつ", "しょくぶつ", "いみ"],
    correctAnswer: 0
  },
  {
    id: 41,
    text: "木炭",
    options: ["もくたん", "たいへいよう", "さんじゅうびょう", "こくばん"],
    correctAnswer: 0
  },
  {
    id: 42,
    text: "えだ豆",
    options: ["えだまめ", "もくたん", "おもいかばん", "こくばん"],
    correctAnswer: 0
  },
  {
    id: 43,
    text: "両方",
    options: ["りょうほう", "たいへいよう", "こくばん", "ぜんぶ"],
    correctAnswer: 0
  },
  {
    id: 44,
    text: "太平洋",
    options: ["たいへいよう", "たいおん", "りょうほう", "ちばけん"],
    correctAnswer: 0
  },
  {
    id: 45,
    text: "服そう",
    options: ["ふくそう", "ふえをふく", "ふで", "そだてる"],
    correctAnswer: 0
  },
  {
    id: 46,
    text: "三十秒",
    options: ["さんじゅうびょう", "ちばけん", "ぜんぶ", "たいへいよう"],
    correctAnswer: 0
  }
];

// Fisher–Yates アルゴリズムで配列をシャッフルするヘルパー関数
export function shuffleArray<T>(array: T[]): T[] {
  const arr = array.slice(); // 元データを壊さないようにコピー
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

export const getQuestionWithShuffledOptions = (question: Question): Question => {
  // options 全体をシャッフル
  const shuffledOptions = shuffleArray(question.options);

  // シャッフル後の配列内で、もともとの正解（options[0]）がどこに移ったか探す
  const correctReading = question.options[question.correctAnswer];
  const newCorrectIndex = shuffledOptions.findIndex(opt => opt === correctReading);

  return {
    id: question.id,
    text: question.text,
    options: shuffledOptions,
    correctAnswer: newCorrectIndex
  };
}